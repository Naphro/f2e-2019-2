(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,function(e,a,t){e.exports=t(80)},,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){var n={"./cards/club1.svg":22,"./cards/club10.svg":23,"./cards/club11.svg":24,"./cards/club12.svg":25,"./cards/club13.svg":26,"./cards/club2.svg":27,"./cards/club3.svg":28,"./cards/club4.svg":29,"./cards/club5.svg":30,"./cards/club6.svg":31,"./cards/club7.svg":32,"./cards/club8.svg":33,"./cards/club9.svg":34,"./cards/diamond1.svg":35,"./cards/diamond10.svg":36,"./cards/diamond11.svg":37,"./cards/diamond12.svg":38,"./cards/diamond13.svg":39,"./cards/diamond2.svg":40,"./cards/diamond3.svg":41,"./cards/diamond4.svg":42,"./cards/diamond5.svg":43,"./cards/diamond6.svg":44,"./cards/diamond7.svg":45,"./cards/diamond8.svg":46,"./cards/diamond9.svg":47,"./cards/heart1.svg":48,"./cards/heart10.svg":49,"./cards/heart11.svg":50,"./cards/heart12.svg":51,"./cards/heart13.svg":52,"./cards/heart2.svg":53,"./cards/heart3.svg":54,"./cards/heart4.svg":55,"./cards/heart5.svg":56,"./cards/heart6.svg":57,"./cards/heart7.svg":58,"./cards/heart8.svg":59,"./cards/heart9.svg":60,"./cards/spade1.svg":61,"./cards/spade10.svg":62,"./cards/spade11.svg":63,"./cards/spade12.svg":64,"./cards/spade13.svg":65,"./cards/spade2.svg":66,"./cards/spade3.svg":67,"./cards/spade4.svg":68,"./cards/spade5.svg":69,"./cards/spade6.svg":70,"./cards/spade7.svg":71,"./cards/spade8.svg":72,"./cards/spade9.svg":73,"./new_game.svg":74,"./restart.svg":75,"./undo.svg":76};function s(e){var a=c(e);return t(a)}function c(e){if(!t.o(n,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=c,e.exports=s,s.id=21},function(e,a,t){e.exports=t.p+"static/media/club1.19f587b0.svg"},function(e,a,t){e.exports=t.p+"static/media/club10.7558835e.svg"},function(e,a,t){e.exports=t.p+"static/media/club11.04cddc0f.svg"},function(e,a,t){e.exports=t.p+"static/media/club12.e361d87f.svg"},function(e,a,t){e.exports=t.p+"static/media/club13.0b65ed7a.svg"},function(e,a,t){e.exports=t.p+"static/media/club2.f84186ae.svg"},function(e,a,t){e.exports=t.p+"static/media/club3.9e33f3a2.svg"},function(e,a,t){e.exports=t.p+"static/media/club4.0227e1b2.svg"},function(e,a,t){e.exports=t.p+"static/media/club5.b0681a4f.svg"},function(e,a,t){e.exports=t.p+"static/media/club6.1524534f.svg"},function(e,a,t){e.exports=t.p+"static/media/club7.9d8d8068.svg"},function(e,a,t){e.exports=t.p+"static/media/club8.694add11.svg"},function(e,a,t){e.exports=t.p+"static/media/club9.14c86976.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond1.86985463.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond10.c135fa5b.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond11.41e55ad6.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond12.ecf14f50.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond13.54067f8d.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond2.36b37412.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond3.5d279bfa.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond4.8da22962.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond5.7f0f3305.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond6.1b48eb0c.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond7.d98f0c31.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond8.4909f881.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond9.23a22a4a.svg"},function(e,a,t){e.exports=t.p+"static/media/heart1.92008583.svg"},function(e,a,t){e.exports=t.p+"static/media/heart10.bf41e2ba.svg"},function(e,a,t){e.exports=t.p+"static/media/heart11.905830cf.svg"},function(e,a,t){e.exports=t.p+"static/media/heart12.bb0f1dbc.svg"},function(e,a,t){e.exports=t.p+"static/media/heart13.1a7ffc95.svg"},function(e,a,t){e.exports=t.p+"static/media/heart2.2858cdaa.svg"},function(e,a,t){e.exports=t.p+"static/media/heart3.34fe969a.svg"},function(e,a,t){e.exports=t.p+"static/media/heart4.0f33eed8.svg"},function(e,a,t){e.exports=t.p+"static/media/heart5.a2245b49.svg"},function(e,a,t){e.exports=t.p+"static/media/heart6.3a6ddcaa.svg"},function(e,a,t){e.exports=t.p+"static/media/heart7.7ae23eff.svg"},function(e,a,t){e.exports=t.p+"static/media/heart8.e64e71b8.svg"},function(e,a,t){e.exports=t.p+"static/media/heart9.d99a1e22.svg"},function(e,a,t){e.exports=t.p+"static/media/spade1.d69e1c10.svg"},function(e,a,t){e.exports=t.p+"static/media/spade10.60e5a146.svg"},function(e,a,t){e.exports=t.p+"static/media/spade11.f45214e1.svg"},function(e,a,t){e.exports=t.p+"static/media/spade12.dd8602d2.svg"},function(e,a,t){e.exports=t.p+"static/media/spade13.0dc22554.svg"},function(e,a,t){e.exports=t.p+"static/media/spade2.105ff13e.svg"},function(e,a,t){e.exports=t.p+"static/media/spade3.fce020d4.svg"},function(e,a,t){e.exports=t.p+"static/media/spade4.cbf00f15.svg"},function(e,a,t){e.exports=t.p+"static/media/spade5.ad216792.svg"},function(e,a,t){e.exports=t.p+"static/media/spade6.5af258f5.svg"},function(e,a,t){e.exports=t.p+"static/media/spade7.f75b0ca6.svg"},function(e,a,t){e.exports=t.p+"static/media/spade8.97169ae5.svg"},function(e,a,t){e.exports=t.p+"static/media/spade9.c067e397.svg"},function(e,a,t){e.exports=t.p+"static/media/new_game.d97cb4ca.svg"},function(e,a,t){e.exports=t.p+"static/media/restart.d6b59cb0.svg"},function(e,a,t){e.exports=t.p+"static/media/undo.bea7376e.svg"},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n,s=t(0),c=t.n(s),r=t(4),o=t.n(r),i=(t(18),t(19),t(8)),d=t(1),l=t(5),u=t(6),f=t(10),g=t(7),p=t(2),v=t(11),m=(t(20),t(9)),b={};(n=t(21)).keys().forEach(function(e){return b[e]=n(e)});var h=b,x=0,O=1,k=2,w=function(e,a){var t=e.name,n=a.name;if(a.belong===O)return null===n?1===+E(t):!!N(t,n)&&E(t)-E(n)===1;if(a.belong===x){if(null!==n)return!(j(n)&&j(t)||y(n)&&y(t))&&E(n)-E(t)===1}else if(a.belong===k)return!0},N=function(e,a){var t=/\d/g;return e.replace(t,"")===a.replace(t,"")},j=function(e){return/(club)|(spade)/g.test(e)},y=function(e){return/(diamond)|(heart)/g.test(e)},E=function(e){return e.match(/\d/g).join("")},D=function(e){return JSON.parse(JSON.stringify(e))};function M(e){var a=e.card,t=e.className,n=e.index,r=e.onMove,o=Object(s.useState)({top:30*n+"px"}),i=Object(m.a)(o,2),d=i[0],l=(i[1],a.draggable?{onDragStart:function(e){e.dataTransfer.setData("text/plain",JSON.stringify(a))}}:null),u=a.droppable?{onDragOver:function(e){e.preventDefault()},onDrop:function(e){var t=e.dataTransfer.getData("text"),n=JSON.parse(t),s=a;console.log(n,s),w(n,s)&&r(n,s)}}:null;return c.a.createElement("img",Object.assign({className:t,style:d,src:h["./cards/"+a.name+".svg"],alt:"card",draggable:a.draggable},l,u))}t(77);function I(e){var a=e.foundation,t=e.onMove,n=e.cards,s=0===n.length?null:n[n.length-1],r=s?null:{onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var n=e.dataTransfer.getData("text"),s=JSON.parse(n),c={name:null,belong:O,belongIndex:a};w(s,c)&&t(s,c)}};return c.a.createElement("div",Object.assign({className:"foundation"},r),s?c.a.createElement(M,{card:s,className:"foundation__card",onMove:t}):null)}t(78);function S(e){var a=e.cards,t=e.cell,n=e.onMove,s=0===a.length,r=s?{onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var a=e.dataTransfer.getData("text"),s=JSON.parse(a),c={name:null,belong:k,belongIndex:t};w(s,c)&&n(s,c)}}:null,o=s?c.a.createElement("div",{className:"cell__content"}):c.a.createElement(M,{card:a[0],className:"cell__card",onMove:n});return c.a.createElement("div",Object.assign({className:"cell"},r),o)}t(79);function _(e){var a=e.cards,t=e.cascadeKey,n=e.onMove;return c.a.createElement("div",{className:"cascade"},a.map(function(e,a){return c.a.createElement(M,{card:e,className:"cascade__card",cascade:t,index:a,key:e.name,onMove:n})}))}function T(e){var a=e.onNew,t=e.onRestart;e.onUndo;return c.a.createElement("nav",{className:"sidenav"},c.a.createElement("img",{src:h["./new_game.svg"],alt:"new game",onClick:a}),c.a.createElement("img",{src:h["./restart.svg"],alt:"restart",onClick:t}))}var C=function(e){function a(e){var t;return Object(l.a)(this,a),(t=Object(f.a)(this,Object(g.a)(a).call(this,e))).handleMove=function(e,a){switch(a.belong){case x:t.moveToCascade(e,a);break;case O:t.moveToFoundation(e,a);break;case k:t.moveToCell(e,a)}},t.moveToCascade=function(e,a){var n=e.belongIndex,s=a.belongIndex;if(e.belong===x){var c=t.state.cascades[n],r=c.map(function(e){return e.name}).indexOf(e.name),o=D(t.state.cascades),i=c.slice(r).map(function(e){return Object(d.a)({},e,{belongIndex:a.belongIndex})});o[s]=o[s].concat(i),o[n]=o[n].filter(function(e){return!i.some(function(a){return e.name===a.name})}),t.setState(Object(d.a)({},t.state,{cascades:o}),t.checkDraggable)}else if(e.belong===k){var l=t.state.cells[n][0],u=D(t.state.cascades),f=D(t.state.cells),g=Object(d.a)({},l,{droppable:!0,draggable:!0,belong:x,belongIndex:a.belongIndex});u[s].push(g),f[n].pop(),t.setState(Object(d.a)({},t.state,{cascades:u,cells:f}),t.checkDraggable)}},t.moveToFoundation=function(e,a){var n=e.belongIndex,s=a.belongIndex,c=t.state.cascades[n],r=c.map(function(e){return e.name}).indexOf(e.name);if(r===c.length-1){var o=D(t.state.cascades),i=D(t.state.foundations),l=c.slice(r).map(function(e){return Object(d.a)({},e,{draggable:!1,droppable:!0,belong:O,belongIndex:s})});console.log(l),i[s]=i[s].concat(l),o[n]=o[n].filter(function(e){return!l.some(function(a){return e.name===a.name})}),t.setState(Object(d.a)({},t.state,{foundations:i,cascades:o}),t.checkDraggable)}},t.moveToCell=function(e,a){var n=e.belongIndex,s=a.belongIndex,c=t.state.cascades[n],r=c.map(function(e){return e.name}).indexOf(e.name);if(r===c.length-1){var o=D(t.state.cascades),i=D(t.state.cells),l=c.slice(r).map(function(e){return Object(d.a)({},e,{draggable:!0,droppable:!1,belong:k,belongIndex:s})});i[s]=i[s].concat(l),o[n]=o[n].filter(function(e){return!l.some(function(a){return e.name===a.name})}),t.setState(Object(d.a)({},t.state,{cells:i,cascades:o}),t.checkDraggable)}},t.state={cells:new Array(4).fill([]),foundations:new Array(4).fill([]),decks:[],cascades:[]},t.handleNew=t.handleNew.bind(Object(p.a)(t)),t.handleRestart=t.handleRestart.bind(Object(p.a)(t)),t}return Object(v.a)(a,e),Object(u.a)(a,[{key:"shuffle",value:function(){for(var e=this,a=["club","diamond","heart","spade"].map(function(e){return new Array(13).fill(null).map(function(a,t){return e+(t+1)})}).flat(),t=[],n=52;n>0;){var s=Math.floor(Math.random()*n);t.push({name:a.splice(s,1)[0],draggable:!1,droppable:!1,belong:x,belongIndex:null}),n--}console.log(t),this.setState(Object(d.a)({},this.state,{decks:t}),function(){e.deal()})}},{key:"deal",value:function(){var e=this,a=Object(i.a)(this.state.decks);console.log(a);var t=[7,7,7,7,6,6,6,6].map(function(e,t){return a.splice(0,e).map(function(e){return Object(d.a)({},e,{belongIndex:t})})});this.setState(Object(d.a)({},this.state,{cascades:t,cells:new Array(4).fill([]),foundations:new Array(4).fill([])}),function(){e.checkDraggable()})}},{key:"checkDraggable",value:function(){var e=this.state.cascades.map(function(e){var a=null,t=!0;return e.reverse().map(function(e){return t&&(t=!a||w(a.name,e.name),a=e),Object(d.a)({},e,{draggable:t,droppable:t})}).reverse()});this.setState(Object(d.a)({},this.state,{cascades:e}))}},{key:"handleNew",value:function(){this.shuffle()}},{key:"handleRestart",value:function(){this.deal()}},{key:"handleUndo",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"playground"},c.a.createElement(T,{onNew:this.handleNew,onRestart:this.handleRestart,onUndo:this.handleUndo}),c.a.createElement("header",{className:"header"}),c.a.createElement("main",{className:"main"},c.a.createElement("div",{className:"storages"},this.state.cells.map(function(a,t){return c.a.createElement(S,{key:t,cell:t,cards:a,onMove:e.handleMove})}),this.state.foundations.map(function(a,t){return c.a.createElement(I,{key:t,foundation:t,cards:a,onMove:e.handleMove})})),c.a.createElement("div",{className:"cascades"},this.state.cascades.map(function(a,t){return c.a.createElement(_,{key:t,cascadeKey:t,cards:a,onMove:e.handleMove})}))))}}]),a}(c.a.Component);var J=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[12,1,2]]]);
//# sourceMappingURL=main.fa96317f.chunk.js.map