(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,a,t){e.exports=t(80)},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){var n={"./cards/club1.svg":20,"./cards/club10.svg":21,"./cards/club11.svg":22,"./cards/club12.svg":23,"./cards/club13.svg":24,"./cards/club2.svg":25,"./cards/club3.svg":26,"./cards/club4.svg":27,"./cards/club5.svg":28,"./cards/club6.svg":29,"./cards/club7.svg":30,"./cards/club8.svg":31,"./cards/club9.svg":32,"./cards/diamond1.svg":33,"./cards/diamond10.svg":34,"./cards/diamond11.svg":35,"./cards/diamond12.svg":36,"./cards/diamond13.svg":37,"./cards/diamond2.svg":38,"./cards/diamond3.svg":39,"./cards/diamond4.svg":40,"./cards/diamond5.svg":41,"./cards/diamond6.svg":42,"./cards/diamond7.svg":43,"./cards/diamond8.svg":44,"./cards/diamond9.svg":45,"./cards/heart1.svg":46,"./cards/heart10.svg":47,"./cards/heart11.svg":48,"./cards/heart12.svg":49,"./cards/heart13.svg":50,"./cards/heart2.svg":51,"./cards/heart3.svg":52,"./cards/heart4.svg":53,"./cards/heart5.svg":54,"./cards/heart6.svg":55,"./cards/heart7.svg":56,"./cards/heart8.svg":57,"./cards/heart9.svg":58,"./cards/spade1.svg":59,"./cards/spade10.svg":60,"./cards/spade11.svg":61,"./cards/spade12.svg":62,"./cards/spade13.svg":63,"./cards/spade2.svg":64,"./cards/spade3.svg":65,"./cards/spade4.svg":66,"./cards/spade5.svg":67,"./cards/spade6.svg":68,"./cards/spade7.svg":69,"./cards/spade8.svg":70,"./cards/spade9.svg":71,"./new_game.svg":72,"./restart.svg":73,"./undo.svg":74};function s(e){var a=c(e);return t(a)}function c(e){if(!t.o(n,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=c,e.exports=s,s.id=19},function(e,a,t){e.exports=t.p+"static/media/club1.19f587b0.svg"},function(e,a,t){e.exports=t.p+"static/media/club10.7558835e.svg"},function(e,a,t){e.exports=t.p+"static/media/club11.04cddc0f.svg"},function(e,a,t){e.exports=t.p+"static/media/club12.e361d87f.svg"},function(e,a,t){e.exports=t.p+"static/media/club13.0b65ed7a.svg"},function(e,a,t){e.exports=t.p+"static/media/club2.f84186ae.svg"},function(e,a,t){e.exports=t.p+"static/media/club3.9e33f3a2.svg"},function(e,a,t){e.exports=t.p+"static/media/club4.0227e1b2.svg"},function(e,a,t){e.exports=t.p+"static/media/club5.b0681a4f.svg"},function(e,a,t){e.exports=t.p+"static/media/club6.1524534f.svg"},function(e,a,t){e.exports=t.p+"static/media/club7.9d8d8068.svg"},function(e,a,t){e.exports=t.p+"static/media/club8.694add11.svg"},function(e,a,t){e.exports=t.p+"static/media/club9.14c86976.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond1.86985463.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond10.c135fa5b.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond11.41e55ad6.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond12.ecf14f50.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond13.54067f8d.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond2.36b37412.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond3.5d279bfa.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond4.8da22962.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond5.7f0f3305.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond6.1b48eb0c.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond7.d98f0c31.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond8.4909f881.svg"},function(e,a,t){e.exports=t.p+"static/media/diamond9.23a22a4a.svg"},function(e,a,t){e.exports=t.p+"static/media/heart1.92008583.svg"},function(e,a,t){e.exports=t.p+"static/media/heart10.bf41e2ba.svg"},function(e,a,t){e.exports=t.p+"static/media/heart11.905830cf.svg"},function(e,a,t){e.exports=t.p+"static/media/heart12.bb0f1dbc.svg"},function(e,a,t){e.exports=t.p+"static/media/heart13.1a7ffc95.svg"},function(e,a,t){e.exports=t.p+"static/media/heart2.2858cdaa.svg"},function(e,a,t){e.exports=t.p+"static/media/heart3.34fe969a.svg"},function(e,a,t){e.exports=t.p+"static/media/heart4.0f33eed8.svg"},function(e,a,t){e.exports=t.p+"static/media/heart5.a2245b49.svg"},function(e,a,t){e.exports=t.p+"static/media/heart6.3a6ddcaa.svg"},function(e,a,t){e.exports=t.p+"static/media/heart7.7ae23eff.svg"},function(e,a,t){e.exports=t.p+"static/media/heart8.e64e71b8.svg"},function(e,a,t){e.exports=t.p+"static/media/heart9.d99a1e22.svg"},function(e,a,t){e.exports=t.p+"static/media/spade1.d69e1c10.svg"},function(e,a,t){e.exports=t.p+"static/media/spade10.60e5a146.svg"},function(e,a,t){e.exports=t.p+"static/media/spade11.f45214e1.svg"},function(e,a,t){e.exports=t.p+"static/media/spade12.dd8602d2.svg"},function(e,a,t){e.exports=t.p+"static/media/spade13.0dc22554.svg"},function(e,a,t){e.exports=t.p+"static/media/spade2.105ff13e.svg"},function(e,a,t){e.exports=t.p+"static/media/spade3.fce020d4.svg"},function(e,a,t){e.exports=t.p+"static/media/spade4.cbf00f15.svg"},function(e,a,t){e.exports=t.p+"static/media/spade5.ad216792.svg"},function(e,a,t){e.exports=t.p+"static/media/spade6.5af258f5.svg"},function(e,a,t){e.exports=t.p+"static/media/spade7.f75b0ca6.svg"},function(e,a,t){e.exports=t.p+"static/media/spade8.97169ae5.svg"},function(e,a,t){e.exports=t.p+"static/media/spade9.c067e397.svg"},function(e,a,t){e.exports=t.p+"static/media/new_game.d97cb4ca.svg"},function(e,a,t){e.exports=t.p+"static/media/restart.f665204b.svg"},function(e,a,t){e.exports=t.p+"static/media/undo.bea7376e.svg"},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n,s=t(0),c=t.n(s),r=t(3),o=t.n(r),i=(t(16),t(17),t(8)),d=t(4),l=t(5),u=t(6),f=t(9),g=t(7),p=t(1),v=t(10),m=(t(18),{});(n=t(19)).keys().forEach(function(e){return m[e]=n(e)});var b=m,h=0,x=1,O=2,y=52,w=function(e,a){var t=e.name,n=a.name;return e.name!==a.name&&(a.belong===x?null===n?1===+E(t):!!D(t,n)&&E(t)-E(n)===1:a.belong===h?null===n||!(k(n)&&k(t)||N(n)&&N(t))&&E(n)-E(t)===1:a.belong===O)},D=function(e,a){var t=/\d/g;return e.replace(t,"")===a.replace(t,"")},k=function(e){return/(club)|(spade)/g.test(e)},N=function(e){return/(diamond)|(heart)/g.test(e)},E=function(e){return e.match(/\d/g).join("")},j=function(e){return JSON.parse(JSON.stringify(e))};t(75);function M(e){var a=e.card,t=e.onMove,n=e.className,s=e.children,r=a.draggable?{onDragStart:function(e){e.stopPropagation(),e.dataTransfer.setData("text/plain",JSON.stringify(a))}}:null,o=a.droppable?{onDragOver:function(e){e.preventDefault()},onDrop:function(e){var n=e.dataTransfer.getData("text"),s=JSON.parse(n),c=a;w(s,c)&&t(s,c)}}:null;return c.a.createElement("div",Object.assign({className:"".concat(n||""," card"),draggable:a.draggable},r,o),c.a.createElement("img",{src:b["./cards/"+a.name+".svg"],alt:"card",draggable:!1}),s)}t(76);function I(e){var a=e.foundation,t=e.onMove,n=e.cards,s=0===n.length?null:n[n.length-1],r=s?null:{onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var n=e.dataTransfer.getData("text"),s=JSON.parse(n),c={name:null,belong:x,belongIndex:a};w(s,c)&&t(s,c)}};return c.a.createElement("div",Object.assign({className:"foundation"},r),s?c.a.createElement(M,{card:s,className:"foundation__card",onMove:t}):null)}t(77);function S(e){var a=e.cards,t=e.cell,n=e.onMove,s=0===a.length,r=s?{onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var a=e.dataTransfer.getData("text"),s=JSON.parse(a),c={name:null,belong:O,belongIndex:t};w(s,c)&&n(s,c)}}:null,o=s?c.a.createElement("div",{className:"cell__content"}):c.a.createElement(M,{card:a[0],className:"cell__card",onMove:n});return c.a.createElement("div",Object.assign({className:"cell"},r),o)}t(78),t(79);function _(e){var a=e.cascadeKey,t=e.onMove;return c.a.createElement("div",{className:"empty-cascade",onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault();var n=e.dataTransfer.getData("text"),s=JSON.parse(n),c={name:null,belong:h,belongIndex:a};w(s,c)&&t(s,c)}})}function T(e){var a=e.cards,t=e.cascadeKey,n=e.onMove,s=j(a),r=0===a.length?c.a.createElement(_,{cascadeKey:t,onMove:n}):s.reverse().reduce(function(e,a,s){return c.a.createElement(M,{card:a,className:"cascade__card",cascade:t,index:s,key:a.name+s,onMove:n},e)},null);return c.a.createElement("div",{className:"cascade"},r)}function J(e){var a=e.onNew,t=e.onRestart;e.onUndo;return c.a.createElement("nav",{className:"sidenav"},c.a.createElement("img",{src:b["./new_game.svg"],alt:"new game",onClick:a}),c.a.createElement("img",{src:b["./restart.svg"],alt:"restart",onClick:t}))}function P(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function C(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?P(Object(t),!0).forEach(function(a){Object(d.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}var U=function(e){function a(e){var t;return Object(l.a)(this,a),(t=Object(f.a)(this,Object(g.a)(a).call(this,e))).handleMove=function(e,a){switch(a.belong){case h:t.moveToCascade(e,a);break;case x:t.moveToFoundation(e,a);break;case O:t.moveToCell(e,a)}},t.doesWin=function(){return t.state.foundations.reduce(function(e,a){return e+a.length},0)===y&&(alert("YOU WIN !"),!0)},t.moveToCascade=function(e,a){var n=e.belongIndex,s=a.belongIndex;if(e.belong===h){var c=t.state.cascades[n],r=c.map(function(e){return e.name}).indexOf(e.name),o=j(t.state.cascades),i=c.slice(r).map(function(e){return C({},e,{belongIndex:s})});o[s]=o[s].concat(i),o[n]=o[n].filter(function(e){return!i.some(function(a){return e.name===a.name})}),t.setState(C({},t.state,{cascades:o}),t.checkDraggable)}else if(e.belong===O){var d=t.state.cells[n][0],l=j(t.state.cascades),u=j(t.state.cells),f=C({},d,{droppable:!0,draggable:!0,belong:h,belongIndex:a.belongIndex});l[s].push(f),u[n].pop(),t.setState(C({},t.state,{cascades:l,cells:u}),t.checkDraggable)}},t.moveToFoundation=function(e,a){var n=e.belongIndex,s=a.belongIndex;if(e.belong===O){var c=t.state.cells[n][0],r=j(t.state.foundations),o=j(t.state.cells),i=C({},c,{draggable:!1,droppable:!0,belong:x,belongIndex:s});r[s].push(i),o[n].pop(),t.setState(C({},t.state,{foundations:r,cells:o}),t.checkDraggable)}else if(e.belong===h){var d=t.state.cascades[n],l=d.map(function(e){return e.name}).indexOf(e.name);if(l===d.length-1){var u=j(t.state.cascades),f=j(t.state.foundations),g=d.slice(l).map(function(e){return C({},e,{draggable:!1,droppable:!0,belong:x,belongIndex:s})});f[s]=f[s].concat(g),u[n]=u[n].filter(function(e){return!g.some(function(a){return e.name===a.name})}),t.setState(C({},t.state,{foundations:f,cascades:u}),t.checkDraggable)}}},t.moveToCell=function(e,a){var n=e.belongIndex,s=a.belongIndex,c=t.state.cascades[n],r=c.map(function(e){return e.name}).indexOf(e.name);if(r===c.length-1){var o=j(t.state.cascades),i=j(t.state.cells),d=c.slice(r).map(function(e){return C({},e,{draggable:!0,droppable:!1,belong:O,belongIndex:s})});i[s]=i[s].concat(d),o[n]=o[n].filter(function(e){return!d.some(function(a){return e.name===a.name})}),t.setState(C({},t.state,{cells:i,cascades:o}),t.checkDraggable)}},t.state={cells:new Array(4).fill([]),foundations:new Array(4).fill([]),decks:[],cascades:[]},t.handleNew=t.handleNew.bind(Object(p.a)(t)),t.handleRestart=t.handleRestart.bind(Object(p.a)(t)),t}return Object(v.a)(a,e),Object(u.a)(a,[{key:"shuffle",value:function(){for(var e=this,a=["club","diamond","heart","spade"].map(function(e){return new Array(13).fill(null).map(function(a,t){return e+(t+1)})}).flat(),t=[],n=y;n>0;){var s=Math.floor(Math.random()*n);t.push({name:a.splice(s,1)[0],draggable:!1,droppable:!1,belong:h,belongIndex:null}),n--}this.setState(C({},this.state,{decks:t}),function(){e.deal()})}},{key:"deal",value:function(){var e=this,a=Object(i.a)(this.state.decks),t=[7,7,7,7,6,6,6,6].map(function(e,t){return a.splice(0,e).map(function(e){return C({},e,{draggable:!1,droppable:!1,belong:h,belongIndex:t})})});this.setState(C({},this.state,{cascades:t,cells:new Array(4).fill([]),foundations:new Array(4).fill([])}),function(){e.checkDraggable()})}},{key:"checkDraggable",value:function(){var e=this.state.cascades.map(function(e){var a=null,t=!0;return e.reverse().map(function(e,n){return t&&(t=!a||w(a,e),a=e),C({},e,{draggable:t,droppable:0===n})}).reverse()});this.setState(C({},this.state,{cascades:e}),this.doesWin)}},{key:"handleNew",value:function(){this.shuffle()}},{key:"handleRestart",value:function(){this.deal()}},{key:"handleUndo",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"playground"},c.a.createElement(J,{onNew:this.handleNew,onRestart:this.handleRestart,onUndo:this.handleUndo}),c.a.createElement("header",{className:"header"}),c.a.createElement("main",{className:"main"},c.a.createElement("div",{className:"storages"},this.state.cells.map(function(a,t){return c.a.createElement(S,{key:t,cell:t,cards:a,onMove:e.handleMove})}),this.state.foundations.map(function(a,t){return c.a.createElement(I,{key:t,foundation:t,cards:a,onMove:e.handleMove})})),c.a.createElement("div",{className:"cascades"},this.state.cascades.map(function(a,t){return c.a.createElement(T,{key:t,cascadeKey:t,cards:a,onMove:e.handleMove})}))))}}]),a}(c.a.Component);var A=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(U,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.1d1aaf22.chunk.js.map